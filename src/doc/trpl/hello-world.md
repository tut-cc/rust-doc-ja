% Hello, world!

Rust のインストールが終わったら、初めの Rust プログラムを書いてみましょう。
どんな新しい言語も、初めのプログラムは
画面に “Hello, world!” というテキスト表示するものを作るのがが伝統です。
この単純なプログラムから始めることは、
コンパイラーがきちんとインストールされているかだけでなく、
正しく動作することを確認するよい方法です。
また、画面に情報を表示することはよくあることです。

初めにすべきことはコードを入れておくファイルを作ることです。
私は `projects` ディレクトリをホームディレクトリに作って、
すべてのプロジェクトをそこに収めておくのが好きです。
Rust はどこにあなたのコードが置かれていようと気にはしません。

ここで、ひとつ触れておくべきことがあります。
このガイドは、あなたがコマンドラインの基本的な操作に親しんでいることを想定しています。
Rust 自体はエディタやコードを保存する場所について、特別に指定はしません。
もしあなたがコマンドラインよりIDEを好むのであれば、
[SolidOak][solidoak] を参照するか、
あなたのお気に入りのIDEのプラグインを探すとよいでしょう。
コミュニティによって開発された様々なクオリティの拡張があります。
また、Rust チームは [plugins for various editors][plugins] で案内をしています。
特に、エディタやIDEの設定はこのチュートリアルの範囲外なので、
ドキュメントを確認して設定してください。

[solidoak]: https://github.com/oakes/SolidOak
[plugins]: https://github.com/rust-lang/rust/blob/master/src/etc/CONFIGS.md

それでは、プロジェクト用ディレクトリの中にディレクトリを作りましょう。

```bash
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

もし Windows を使っていて、PowerShell を使っていなければ、
`~` はうまく動作しないでしょう。
詳しくは、使っているシェルのドキュメントを調べて下さい。

次に、新しいソースファイルを作りましょう。
このファイルを `main.rs` のようにします。
Rust ファイルは常に `.rs` という拡張子で終わります。
もし、2つ以上の単語をファイル名にするときは、
`helloworld.rs` とするよりは、アンダーバーを使って `hello_world.rs` としたほうが良いでしょう。

ファイルを開いたら、次のように入力してください。

```rust
fn main() {
    println!("Hello, world!");
}
```

ファイルを保存して、次のようにターミナルに入力してください。

```bash
$ rustc main.rs
$ ./main # or main.exe on Windows
Hello, world!
```

成功です! 何が起こったのか詳しく見てみましょう。

```rust
fn main() {

}
```

この行は Rust において *関数* を定義しています。
`main` 関数は特別で、
すべての Rust プログラムは `main` 関数から始まります。
1行目は
「これは `main` という名前の関数で、引数を取らず、何も返しません。」
という意味です。
もし引数があれば括弧(`(`と`)`)の中に書かれたでしょう。
また、この関数は何も返さないので、
返す型を省略出来ます。
これについては後で触れます。

この関数が波括弧(`{`と`}`)に囲まれていることにも気がつくでしょう。
Rust では、これらの括弧がどんな関数の本体でも必要です。
また、関数の定義と同じ行にスペースをひとつ空けて開き括弧を書くのが、
よいスタイルだと考えられます。

次はこの行です。

```rust
    println!("Hello, world!");
```

この行が我々の小さなプログラムの仕事のすべてをしています。
この行には重要な情報がたくさんあります。
一つ目は、この行がタブではなく4つのスペースでインデントされていることです。
あなたのエディタがタブキーで、4つのスペースを入力するように設定して下さい。
私達は [様々なエディタ向けに設定のサンプル][configs] を提供しています。

[configs]: https://github.com/rust-lang/rust/tree/master/src/etc/CONFIGS.md

二つ目は、`println!()` という部分です。
これは、 Rust メタプログラミングを行う [マクロ][macro] を呼び出しています。
もしこれが関数であれば、 `println()` のようになったでしょう。
とりあえずは、この違いについて気にする必要はありません。
ただ、今後 `!` を見ることがあるでしょうが、
それが普通の関数ではなくマクロの呼び出しであることだけは知っておいて下さい。
Rust は正当な理由があって `println!` を関数ではなくマクロとして実装しています。
それについては発展したトピックで取り扱います。
最後にもうひとつ、もしあなたが C のマクロを使ったことがあるのなら、
Rust のマクロはそれとは大きく違うものです。
マクロを使うことを恐れないでください。
後々それについては触れますが、今のところは私たちのいうことを信じて下さい。

[macro]: macros.html

次に、 `"Hello, world!"` は ‘文字列’ ‘string’ です。
文字列はシステムプログラミング言語において、驚くほど込み入ったトピックですが、
これは ‘静的に割り当てられた’ ‘statically allocated’ 文字列です。
もし割り当てについて知りたければ [スタックとヒープ][allocation] を参照して下さい。
そうでなければ今すぐ読む必要はありません。
この文字列を引数として `println!` に渡し、
それが画面にこの文字列を表示します。
簡単だね！

[allocation]: the-stack-and-the-heap.html

最後に、この行はセミコロン(`;`)で終わっています。
Rust は ‘式指向’ の言語で、ほとんどのものが述語というより式です。
`;` は式がそこで終わり、次の式が始まることを示しています。
Rust のコードではほとんどの行が `;` で終わります。

最後に、実際にプログラムをコンパイルして実行しましょう。
ソースファイルの名前を `rustc` に渡すことでコンパイルができます。


```bash
$ rustc main.rs
```

もしあなたが C や C++ の経験があれば `gcc` や `clang` と似たようなものに見えるでしょう。
Rust は実行可能なバイナリを出力します。
これを `ls` で確認して見ましょう。

```bash
$ ls
main  main.rs
```

Windows であれば次のようにします。

```bash
$ dir
main.exe  main.rs
```

2つのファイルがありますね。
`.rs` 拡張しのついたソースコードと、
実行可能なファイル(Windowsでは `main.exe` 、 その他では `main` )です。

```bash
$ ./main  # or main.exe on Windows
```

このようにすると、ターミナルに `Hello, world!` というテキストが表示されます。

もしあなたが Ruby 、 Python 、 JavaScript と言った動的言語から来たのであれば、
2つのステップに別れることに慣れないかもしれません。
Rust は実行時前にコンパイルされる言語です。
あなたはプログラムをコンパイルして誰かにあげることができるわけですが、
もらった相手は Rust をインストールしている必要がないのです。
もしあなたが `.rb` や `.py` や `.js` といったファイルをあげるとすると、
相手は Ruby/Python/JavaScript をインストールしている必要がありますが、
あなたはそのプログラムをコンパイルして実行するのにひとつのコマンドしか必要ありません。
言語のデザインは何事もトレードオフです。
Rust はこの選択をしたのです。

おめでとう！
あなたはもう公式に Rust のプログラムを書きました。
ゆえにあなたは Rust プログラマーです。
ようこそ！🎊🎉👍

次は、実際に Rust プログラムを書くのに用いられる `Cargo` というツールを紹介します。
`rustc` だけを使うのは単純なことをするにはよいですが、
プロジェクトが成長するにつれて、
すべてのオプションを管理するのを手助けしてくれたり、
あなたのコードを他の人たちや他のプロジェクトと共有するのを簡単にしてくれたりするものが欲しくなるでしょう。

